<% if notice %>
  <div data-flash-notice="<%= notice %>" style="display: none;"></div>
<% end %>

<script>
  function showToastify(message) {
    if (typeof Toastify !== 'undefined' && message) {
      Toastify({
        text: message,
        style: {
          background: "linear-gradient(to right, #00b09b, #96c93d)",
        },
      }).showToast();
    }
  }

  // Executa quando a página carrega (incluindo navegação Turbo)
  document.addEventListener('DOMContentLoaded', function() {
    const noticeElement = document.querySelector('[data-flash-notice]');
    if (noticeElement) {
      showToastify(noticeElement.getAttribute('data-flash-notice'));
      noticeElement.remove();
    }
  });

  // Executa após navegação Turbo
  document.addEventListener('turbo:load', function() {
    const noticeElement = document.querySelector('[data-flash-notice]');
    if (noticeElement) {
      showToastify(noticeElement.getAttribute('data-flash-notice'));
      noticeElement.remove();
    }
  });
</script>
