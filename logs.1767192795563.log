2025-12-31T14:52:42.444810831Z [inf]  scheduling build on Metal builder "builder-wkkdbn"
2025-12-31T14:52:50.316205906Z [inf]  scheduling build on Metal builder "builder-wkkdbn"
2025-12-31T14:52:50.526514924Z [inf]  [snapshot] received sha256:2cdde435db77768e285a22a0e23d53b3a5ce94575120027e513167bb74bdaba9 md5:8d30ff660f67e3cf349743f68c6e0df0
2025-12-31T14:52:50.526605219Z [inf]  receiving snapshot
2025-12-31T14:52:50.641878926Z [dbg]  found 'Dockerfile' at 'Dockerfile'
2025-12-31T14:52:50.641982761Z [inf]  analyzing snapshot
2025-12-31T14:52:50.940232924Z [inf]  uploading snapshot
2025-12-31T14:52:58.070995413Z [inf]  fetched snapshot sha256:2cdde435db77768e285a22a0e23d53b3a5ce94575120027e513167bb74bdaba9 (12 MB bytes)
2025-12-31T14:52:58.071080891Z [inf]  fetching snapshot
2025-12-31T14:52:58.570594458Z [inf]  unpacking archive
2025-12-31T14:52:59.044613333Z [inf]  [internal] load build definition from Dockerfile
2025-12-31T14:52:59.044800674Z [inf]  [internal] load build definition from Dockerfile
2025-12-31T14:52:59.045165902Z [inf]  [internal] load build definition from Dockerfile
2025-12-31T14:52:59.251672984Z [inf]  [internal] load build definition from Dockerfile
2025-12-31T14:52:59.384719947Z [inf]  resolve image config for docker-image://docker.io/docker/dockerfile:1
2025-12-31T14:52:59.531440626Z [inf]  docker-image://docker.io/docker/dockerfile:1@sha256:b6afd42430b15f2d2a4c5a02b919e98a525b785b1aaff16747d2f623364e39b6
2025-12-31T14:52:59.531443590Z [inf]  resolve image config for docker-image://docker.io/docker/dockerfile:1
2025-12-31T14:52:59.531448117Z [inf]  docker-image://docker.io/docker/dockerfile:1@sha256:b6afd42430b15f2d2a4c5a02b919e98a525b785b1aaff16747d2f623364e39b6
2025-12-31T14:52:59.550606091Z [inf]  docker-image://docker.io/docker/dockerfile:1@sha256:b6afd42430b15f2d2a4c5a02b919e98a525b785b1aaff16747d2f623364e39b6
2025-12-31T14:52:59.550616747Z [inf]  docker-image://docker.io/docker/dockerfile:1@sha256:b6afd42430b15f2d2a4c5a02b919e98a525b785b1aaff16747d2f623364e39b6
2025-12-31T14:52:59.834040554Z [inf]  [internal] load metadata for docker.io/library/ruby:3.4.7-slim
2025-12-31T14:52:59.990261197Z [inf]  [internal] load metadata for docker.io/library/ruby:3.4.7-slim
2025-12-31T14:52:59.993782109Z [inf]  [internal] load .dockerignore
2025-12-31T14:52:59.993901739Z [inf]  [internal] load .dockerignore
2025-12-31T14:52:59.994203692Z [inf]  [internal] load .dockerignore
2025-12-31T14:53:00.090073254Z [inf]  [internal] load .dockerignore
2025-12-31T14:53:01.046335504Z [inf]  [stage-2 2/3] COPY --chown=rails:rails --from=build /usr/local/bundle /usr/local/bundle
2025-12-31T14:53:01.046339049Z [inf]  [build 6/6] RUN SECRET_KEY_BASE_DUMMY=1 ./bin/rails assets:precompile
2025-12-31T14:53:01.046339460Z [inf]  [build 5/6] RUN bundle exec bootsnap precompile -j 1 app/ lib/
2025-12-31T14:53:01.046339790Z [inf]  [build 4/6] COPY . .
2025-12-31T14:53:01.046340141Z [inf]  [build 3/6] RUN bundle install &&     rm -rf ~/.bundle/ "/usr/local/bundle"/ruby/*/cache "/usr/local/bundle"/ruby/*/bundler/gems/*/.git &&     bundle exec bootsnap precompile -j 1 --gemfile
2025-12-31T14:53:01.046340461Z [inf]  [build 2/6] COPY Gemfile Gemfile.lock vendor ./
2025-12-31T14:53:01.046340612Z [inf]  [internal] load build context
2025-12-31T14:53:01.046340752Z [inf]  [build 1/6] RUN apt-get update -qq &&     apt-get install --no-install-recommends -y build-essential git libpq-dev libyaml-dev pkg-config &&     rm -rf /var/lib/apt/lists /var/cache/apt/archives
2025-12-31T14:53:01.046340902Z [inf]  [stage-2 1/3] RUN groupadd --system --gid 1000 rails &&     useradd rails --uid 1000 --gid 1000 --create-home --shell /bin/bash
2025-12-31T14:53:01.046341172Z [inf]  [base 3/3] RUN apt-get update -qq &&     apt-get install --no-install-recommends -y curl libjemalloc2 libvips postgresql-client &&     ln -s /usr/lib/$(uname -m)-linux-gnu/libjemalloc.so.2 /usr/local/lib/libjemalloc.so &&     rm -rf /var/lib/apt/lists /var/cache/apt/archives
2025-12-31T14:53:01.046341413Z [inf]  [base 2/3] WORKDIR /rails
2025-12-31T14:53:01.046341553Z [inf]  [base 1/3] FROM docker.io/library/ruby:3.4.7-slim@sha256:93dd13e28987e373857fbda4a7f4ae99e9f7acb6fcc266035e551229974d1c89
2025-12-31T14:53:01.046343236Z [inf]  [stage-2 3/3] COPY --chown=rails:rails --from=build /rails /rails
2025-12-31T14:53:01.046972549Z [inf]  [base 1/3] FROM docker.io/library/ruby:3.4.7-slim@sha256:93dd13e28987e373857fbda4a7f4ae99e9f7acb6fcc266035e551229974d1c89
2025-12-31T14:53:01.047133551Z [inf]  [internal] load build context
2025-12-31T14:53:01.088038304Z [inf]  [base 1/3] FROM docker.io/library/ruby:3.4.7-slim@sha256:93dd13e28987e373857fbda4a7f4ae99e9f7acb6fcc266035e551229974d1c89
2025-12-31T14:53:01.089776713Z [inf]  [internal] load build context
2025-12-31T14:53:01.089881450Z [inf]  [base 2/3] WORKDIR /rails
2025-12-31T14:53:01.089883393Z [inf]  [base 3/3] RUN apt-get update -qq &&     apt-get install --no-install-recommends -y curl libjemalloc2 libvips postgresql-client &&     ln -s /usr/lib/$(uname -m)-linux-gnu/libjemalloc.so.2 /usr/local/lib/libjemalloc.so &&     rm -rf /var/lib/apt/lists /var/cache/apt/archives
2025-12-31T14:53:01.089884044Z [inf]  [stage-2 1/3] RUN groupadd --system --gid 1000 rails &&     useradd rails --uid 1000 --gid 1000 --create-home --shell /bin/bash
2025-12-31T14:53:01.111802310Z [inf]  [stage-2 1/3] RUN groupadd --system --gid 1000 rails &&     useradd rails --uid 1000 --gid 1000 --create-home --shell /bin/bash
2025-12-31T14:53:01.351643887Z [inf]  [internal] load build context
2025-12-31T14:53:01.421764425Z [inf]  [build 1/6] RUN apt-get update -qq &&     apt-get install --no-install-recommends -y build-essential git libpq-dev libyaml-dev pkg-config &&     rm -rf /var/lib/apt/lists /var/cache/apt/archives
2025-12-31T14:53:01.421770905Z [inf]  [build 2/6] COPY Gemfile Gemfile.lock vendor ./
2025-12-31T14:53:01.421772026Z [inf]  [build 3/6] RUN bundle install &&     rm -rf ~/.bundle/ "/usr/local/bundle"/ruby/*/cache "/usr/local/bundle"/ruby/*/bundler/gems/*/.git &&     bundle exec bootsnap precompile -j 1 --gemfile
2025-12-31T14:53:01.421993949Z [inf]  [build 4/6] COPY . .
2025-12-31T14:53:01.794024992Z [inf]  [build 4/6] COPY . .
2025-12-31T14:53:01.814076898Z [inf]  [build 5/6] RUN bundle exec bootsnap precompile -j 1 app/ lib/
2025-12-31T14:53:03.000103645Z [inf]  [build 5/6] RUN bundle exec bootsnap precompile -j 1 app/ lib/
2025-12-31T14:53:03.031122916Z [inf]  [build 6/6] RUN SECRET_KEY_BASE_DUMMY=1 ./bin/rails assets:precompile
2025-12-31T14:53:04.286896029Z [inf]  bin/rails aborted!

2025-12-31T14:53:04.287699415Z [inf]  KeyError: key not found: "DATABASE_USERNAME" (KeyError)

2025-12-31T14:53:04.287901999Z [inf]  /rails/config/database.yml:31:in 'fetch'
/rails/config/database.yml:31:in '<main>'
/usr/local/bundle/ruby/3.4.0/gems/erb-6.0.0/lib/erb.rb:1012:in 'Kernel#eval'
/usr/local/bundle/ruby/3.4.0/gems/erb-6.0.0/lib/erb.rb:1012:in 'ERB#result'
/usr/local/bundle/ruby/3.4.0/gems/activesupport-8.1.1/lib/active_support/configuration_file.rb:57:in 'ActiveSupport::ConfigurationFile#render'
/usr/local/bundle/ruby/3.4.0/gems/activesupport-8.1.1/lib/active_support/configuration_file.rb:22:in 'ActiveSupport::ConfigurationFile#parse'
/usr/local/bundle/ruby/3.4.0/gems/activesupport-8.1.1/lib/active_support/configuration_file.rb:18:in 'ActiveSupport::ConfigurationFile.parse'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/application/configuration.rb:445:in 'Rails::Application::Configuration#load_database_yaml'
/usr/local/bundle/ruby/3.4.0/gems/activerecord-8.1.1/lib/active_record/tasks/database_tasks.rb:138:in 'ActiveRecord::Tasks::DatabaseTasks#setup_initial_database_yaml'
/usr/local/bundle/ruby/3.4.0/gems/activerecord-8.1.1/lib/active_record/railties/databases.rake:7:in '<main>'
/usr/local/bundle/ruby/3.4.0/gems/activerecord-8.1.1/lib/active_record/railtie.rb:60:in 'Kernel#load'
/usr/local/bundle/ruby/3.4.0/gems/activerecord-8.1.1/lib/active_record/railtie.rb:60:in 'block in <class:Railtie>'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/railtie.rb:284:in 'BasicObject#instance_exec'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/railtie.rb:284:in 'block in Rails::Railtie#run_tasks_blocks'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/railtie.rb:296:in 'Array#each'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/railtie.rb:296:in 'Rails::Railtie#each_registered_block'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/railtie.rb:284:in 'Rails::Railtie#run_tasks_blocks'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/application.rb:563:in 'block in Rails::Application#run_tasks_blocks'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/engine/railties.rb:15:in 'Array#each'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/engine/railties.rb:15:in 'Rails::Engine::Railties#each'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/application.rb:563:in 'Rails::Application#run_tasks_blocks'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/engine.rb:469:in 'Rails::Engine#load_tasks'
/rails/Rakefile:8:in '<main>'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/commands/rake/rake_command.rb:43:in 'block in Rails::Command::RakeCommand.with_rake'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/commands/rake/rake_command.rb:41:in 'Rails::Command::RakeCommand.with_rake'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/commands/rake/rake_command.rb:20:in 'Rails::Command::RakeCommand.perform'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/command.rb:150:in 'Rails::Command.invoke_rake'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/command.rb:67:in 'block in Rails::Command.invoke'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/command.rb:143:in 'Rails::Command.with_argv'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/command.rb:63:in 'Rails::Command.invoke'
/usr/local/bundle/ruby/3.4.0/gems/railties-8.1.1/lib/rails/commands.rb:18:in '<main>'
/usr/local/bundle/ruby/3.4.0/gems/bootsnap-1.18.6/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in 'Kernel#require'
./bin/rails:4:in '<main>'
(See full trace by running task with --trace)

2025-12-31T14:53:04.711904399Z [err]  [build 6/6] RUN SECRET_KEY_BASE_DUMMY=1 ./bin/rails assets:precompile
2025-12-31T14:53:04.745806105Z [err]  Build Failed: build daemon returned an error < failed to solve: process "/bin/sh -c SECRET_KEY_BASE_DUMMY=1 ./bin/rails assets:precompile" did not complete successfully: exit code: 1 >